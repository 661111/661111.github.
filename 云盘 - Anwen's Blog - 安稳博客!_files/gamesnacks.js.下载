!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t),a.d(t,"GAMESNACKS",(function(){return n}));var n={audioEnabled:!0,shouldAudioBeEnabledAfterAd:!0,isAdInProgress:!1,audioSubscribers:[],ghostDataSubscriber:null,sendScore:function(e,t){void 0===t&&(t={}),parent.postMessage(JSON.stringify({score:e,scoreMetadata:t}),"*")},gameOver:function(){parent.postMessage(JSON.stringify({type:"gameOver",value:!0}),"*")},isAudioEnabled:function(){return this.notifyGamesnacksOfAudioApiUsage(),this.audioEnabled},subscribeToAudioUpdates:function(e){this.notifyGamesnacksOfAudioApiUsage(),this.audioSubscribers.push(e)},notifyGamesnacksOfAudioApiUsage:function(){parent.postMessage(JSON.stringify({type:"GAMESNACKS_AUDIO_SUBCRIPTION",value:!0}),"*")},listenAndDelegateMessages:function(){var e=this;window.addEventListener("message",(function(t){var a=t&&t.data&&t.data.type;"GAMESNACKS_AUDIO_UPDATE"===a?e.handleAudioUpdates(t):"GAMESNACKS_ADS_INITIALIZE"===a?e._initializeAds(t):"GAMESNACKS_ADS_AD_BREAK"===a&&e._adBreak(t)}),!1)},_sendSdkLoadedMessage:function(){parent.postMessage(JSON.stringify({type:"GAMESNACKS_SDK_LOADED",value:!0}),"*")},_initializeAds:function(e){var t=e.data.value;if(t&&t.publisherId&&t.dataAdFrequencyHint&&t.dataAdbreakTest&&t.afgSdkUrl&&t.preloadAdBreaks){var a=window.document.createElement("script");a.setAttribute("data-ad-client",t.publisherId),a.setAttribute("data-ad-frequency-hint",t.dataAdFrequencyHint),a.setAttribute("src",t.afgSdkUrl),"on"===t.dataAdbreakTest&&a.setAttribute("data-adbreak-test","on"),window.document.head.appendChild(a),window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)},window.adConfig({preloadAdBreaks:t.preloadAdBreaks,sound:this._getAdconfigSoundParam()})}else console.warn("Malformatted GS SDK request: initializeAds.")},_getAdconfigSoundParam:function(){return this.audioEnabled?"on":"off"},_adBreak:function(e){var t=e.data.value;if(t&&t.type&&t.name){var a={type:t.type,name:t.name,beforeBreak:this._beforeBreak,afterBreak:this._afterBreak};window.adBreak&&window.adBreak(a)}else console.warn("Malformatted GS SDK request: initializeAds.")},_beforeBreak:function(){parent.postMessage(JSON.stringify({type:"GAMESNACKS_ADS_BEFORE_BREAK",value:!0}),"*"),this.isAdInProgress=!0,this.shouldAudioBeEnabledAfterAd=this.audioEnabled,this._changeAudioAndUpdateSubscribers(!1)},_afterBreak:function(){parent.postMessage(JSON.stringify({type:"GAMESNACKS_ADS_AFTER_BREAK",value:!0}),"*"),this.isAdInProgress=!1,this._changeAudioAndUpdateSubscribers(this.shouldAudioBeEnabledAfterAd)},handleAudioUpdates:function(e){if(e&&e.data&&"GAMESNACKS_AUDIO_UPDATE"===e.data.type){var t=e.data.isAudioEnabled;"boolean"==typeof t&&(this.isAdInProgress?this.shouldAudioBeEnabledAfterAd=t:(this._changeAudioAndUpdateSubscribers(t),window.adConfig&&window.adConfig({sound:this._getAdconfigSoundParam()})))}},_changeAudioAndUpdateSubscribers:function(e){this.audioEnabled=e,this.updateAudioSubscribers()},updateAudioSubscribers:function(){var e=this;this.audioSubscribers.forEach((function(t){t(e.audioEnabled)}))},_subscribeToGhostData:function(e){this.ghostDataSubscriber=e;var t=this;window.addEventListener("message",(function(e){e&&e.data&&"GAMESNACKS_RECEIVE_GHOST_DATA"===e.data.type&&t.ghostDataSubscriber(e.data.value)}),!1),parent.postMessage(JSON.stringify({type:"GAMESNACKS_SUBSCRIBE_TO_GHOST_DATA",value:!0}),"*")},_gameOverWithGhost:function(e){parent.postMessage(JSON.stringify({type:"GAMESNACKS_GAME_OVER_WITH_GHOST",value:e}),"*")},gameReady:function(){parent.postMessage(JSON.stringify({type:"GAMESNACKS_GAME_READY",value:Date.now()}),"*")},levelComplete:function(e){parent.postMessage(JSON.stringify({type:"GAMESNACKS_LEVEL_COMPLETE",value:e}),"*")}};n.listenAndDelegateMessages(),n._afterBreak=n._afterBreak.bind(n),n._beforeBreak=n._beforeBreak.bind(n),n._sendSdkLoadedMessage(),window.GAMESNACKS=n}]);